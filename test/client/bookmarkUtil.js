const test = require('tape')
const bookmarkUtil = require('../../client/bookmarkUtil')

test('test bookmarkUtil.getBaseBookmarksOrder', (t) => {
  t.plan(4)
  t.equals(bookmarkUtil.getBaseBookmarksOrder('0', 'ios'), '2.0.')
  t.equals(bookmarkUtil.getBaseBookmarksOrder('0', 'android'), '2.0.')
  t.equals(bookmarkUtil.getBaseBookmarksOrder('0', 'laptop'), '1.0.')
  t.equals(bookmarkUtil.getBaseBookmarksOrder('10', 'laptop'), '1.10.')
})

test('test bookmarkUtil.getBookmarkOrder', (t) => {
  t.plan(22)
  t.equals(bookmarkUtil.getBookmarkOrder('', '2.0.9'), '2.0.8')
  t.equals(bookmarkUtil.getBookmarkOrder('2.0.8', ''), '2.0.9')
  t.equals(bookmarkUtil.getBookmarkOrder('', '2.0.1'), '2.0.0.1')
  t.equals(bookmarkUtil.getBookmarkOrder('2.0.8', '2.0.9'), '2.0.8.1')
  t.equals(bookmarkUtil.getBookmarkOrder('2.0.8', '2.0.8.1'), '2.0.8.0.1')
  t.equals(bookmarkUtil.getBookmarkOrder('2.0.8', '2.0.8.0.1'), '2.0.8.0.0.1')
  t.equals(bookmarkUtil.getBookmarkOrder('2.0.8', '2.0.8.0.0.1'), '2.0.8.0.0.0.1')
  t.equals(bookmarkUtil.getBookmarkOrder('2.0.8.1', '2.0.9'), '2.0.8.2')
  t.equals(bookmarkUtil.getBookmarkOrder('2.0.8.1', '2.0.10'), '2.0.8.2')
  t.equals(bookmarkUtil.getBookmarkOrder('2.0.8.10', '2.0.8.15'), '2.0.8.11')
  t.equals(bookmarkUtil.getBookmarkOrder('2.0.8.10', '2.0.8.15.1'), '2.0.8.11')
  t.equals(bookmarkUtil.getBookmarkOrder('2.0.8.10', '2.0.8.11.1'), '2.0.8.11')
  t.equals(bookmarkUtil.getBookmarkOrder('2.0.8.10.0.1', '2.0.8.15.1'), '2.0.8.10.0.2')
  t.equals(bookmarkUtil.getBookmarkOrder('2.5.6.3', '2.5.7.8.2'), '2.5.6.4')
  t.equals(bookmarkUtil.getBookmarkOrder('2.5.6.32', '2.5.7.8.2'), '2.5.6.33')
  t.equals(bookmarkUtil.getBookmarkOrder('1.1.1.2', '1.1.1.2.1'), '1.1.1.2.0.1')
  t.equals(bookmarkUtil.getBookmarkOrder('1.1.1.2.1', '1.1.1.3'), '1.1.1.2.2')
  t.equals(bookmarkUtil.getBookmarkOrder('', '', '2.0.9'), '2.0.9.1')

  t.throws(() => bookmarkUtil.getBookmarkOrder('', '', ''), /Invalid previous, next and parent/, 'requires at least one argument')
  t.throws(() => bookmarkUtil.getBookmarkOrder('', '2.0.0'), /Invalid input order/)
  t.throws(() => bookmarkUtil.getBookmarkOrder('2.0.0', ''), /Invalid input order/)
  t.throws(() => bookmarkUtil.getBookmarkOrder('2.0.9', '2.0.8'), /Invalid input, prevOrder should be less then nextOrder/)
})

test('test bookmarkUtil.compareOrders', (t) => {
  t.plan(30)
  t.equals(bookmarkUtil.compareIntVecOrders([], []), false)
  t.equals(bookmarkUtil.compareIntVecOrders([1], [2]), true)
  t.equals(bookmarkUtil.compareIntVecOrders([1], [1, 1]), true)
  t.equals(bookmarkUtil.compareIntVecOrders([1, 1], [2, 234, 1]), true)
  t.equals(bookmarkUtil.compareIntVecOrders([2, 0, 0, 1], [2, 0, 1]), true)
  t.equals(bookmarkUtil.compareIntVecOrders([2, 0, 8, 11], [2, 0, 8, 11, 1]), true)

  t.equals(bookmarkUtil.compareStringOrders('', ''), false)
  t.equals(bookmarkUtil.compareStringOrders('1', '2'), true)
  t.equals(bookmarkUtil.compareStringOrders('1', '1.1'), true)
  t.equals(bookmarkUtil.compareStringOrders('1.2', '2.234.1'), true)
  t.equals(bookmarkUtil.compareStringOrders('2.234.1', '63.17.1.45.2'), true)

  t.equals(bookmarkUtil.compareStringOrders('2', '1'), false)
  t.equals(bookmarkUtil.compareStringOrders('2', '2'), false)
  t.equals(bookmarkUtil.compareStringOrders('2', '11'), true)
  t.equals(bookmarkUtil.compareStringOrders('11', '2'), false)
  t.equals(bookmarkUtil.compareStringOrders('1.7.0.1', '1.7.1'), true)
  t.equals(bookmarkUtil.compareStringOrders('1.7.0.1', '1.7.0.2'), true)
  t.equals(bookmarkUtil.compareStringOrders('1.7.0.2', '1.7.0.1'), false)
  t.equals(bookmarkUtil.compareStringOrders('2.0.8', '2.0.8.0.1'), true)
  t.equals(bookmarkUtil.compareStringOrders('2.0.8.0.1', '2.0.8.1'), true)
  t.equals(bookmarkUtil.compareStringOrders('2.0.8', '2.0.8.0.0.1'), true)
  t.equals(bookmarkUtil.compareStringOrders('2.0.8.0.0.1', '2.0.8.0.1'), true)
  t.equals(bookmarkUtil.compareStringOrders('2.0.8.10', '2.0.8.10.1'), true)
  t.equals(bookmarkUtil.compareStringOrders('2.0.8.10.1', '2.0.8.11.1'), true)
  t.equals(bookmarkUtil.compareStringOrders('2.0.0.1', '2.0.1'), true)
  t.equals(bookmarkUtil.compareStringOrders('2.5.6.3', '2.5.7.8.2'), true)
  t.equals(bookmarkUtil.compareStringOrders('2.5.6.3', '2.5.6.4'), true)
  t.equals(bookmarkUtil.compareStringOrders('2.5.6.4', '2.5.7.8.2'), true)
  t.equals(bookmarkUtil.compareStringOrders('2.0.8.10', '2.0.8.11'), true)
  t.equals(bookmarkUtil.compareStringOrders('2.0.8.11', '2.0.8.11.1'), true)
})
